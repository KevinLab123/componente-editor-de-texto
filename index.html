<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="style.css">

    <title>Editor de Plantillas</title>
</head>

<body>



    <div class="container-fluid py-3">

        <!-- HEADER -->
        <div class="row mb-3">
            <div class="col">
                <div class="card shadow-sm">
                    <div class="card-body d-flex gap-3 align-items-center">

                        <input id="filename" type="text" class="form-control w-25" placeholder="Nombre del archivo"
                            value="Sin nombrar">

                        <!-- Archivo -->
                        <select class="form-select w-auto" onchange="saveAsPDF(this.value); this.selectedIndex=0;">
                            <option hidden selected>Archivo</option>
                            <option value="new">Nuevo</option>
                            <option value="pdf">Guardar PDF</option>
                            <option value="save">Guardar Plantilla</option>
                        </select>

                        <!-- Formato -->
                        <select class="form-select w-auto" onchange="setBlockFormat(this.value); this.selectedIndex=0;">
                            <option hidden selected>Formato</option>
                            <option value="h1">Encabezado 1</option>
                            <option value="h2">Encabezado 2</option>
                            <option value="h3">Encabezado 3</option>
                            <option value="h4">Encabezado 4</option>
                            <option value="h5">Encabezado 5</option>
                            <option value="h6">Encabezado 6</option>
                            <option value="p">Párrafo</option>
                        </select>

                        <!-- Fuente -->
                        <select class="form-select w-auto" onchange="setFontFamily(this.value); this.selectedIndex=0;">
                            <option hidden selected>Fuente</option>

                            <!-- Sans Serif empresariales -->
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="Segoe UI, sans-serif">Segoe UI</option>
                            <option value="Calibri, sans-serif">Calibri</option>
                            <option value="Verdana, sans-serif">Verdana</option>
                            <option value="Tahoma, sans-serif">Tahoma</option>
                            <option value="Trebuchet MS, sans-serif">Trebuchet MS</option>
                            <option value="Helvetica, sans-serif">Helvetica</option>

                            <!-- Serif institucional -->
                            <option value="Georgia, serif">Georgia</option>
                            <option value="Times New Roman, serif">Times New Roman</option>
                            <option value="Cambria, serif">Cambria</option>
                            <option value="Garamond, serif">Garamond</option>

                            <!-- Mono (técnico / datos) -->
                            <option value="Consolas, monospace">Consolas</option>
                            <option value="Courier New, monospace">Courier New</option>
                            <option value="Lucida Console, monospace">Lucida Console</option>
                        </select>


                        <!-- Tamaño -->
                        <select class="form-select w-auto" onchange="setFontSize(this.value); this.selectedIndex=0;">
                            <option hidden selected>Tamaño</option>
                            <option value="10px">Pequeño</option>
                            <option value="12px">Normal</option>
                            <option value="18px">Grande</option>
                            <option value="24px">Extra Grande</option>
                        </select>

                        <!-- Color -->
                        <input type="color" class="form-control form-control-color"
                            oninput="formatDoc('foreColor',this.value)">

                        <!-- Fondo -->
                        <input type="color" class="form-control form-control-color"
                            oninput="formatDoc('hiliteColor',this.value)">

                    </div>
                </div>
            </div>
        </div>
        <!-- TOOLBAR -->
        <div class="row mb-3">
            <div class="col">
                <div class="card shadow-sm">
                    <div class="card-body">

                        <div class="btn-toolbar gap-2 flex-wrap">
                            <button class="btn btn-outline-secondary" onclick="saveContent()">
                                <i class="bi bi-floppy2-fill"></i>
                            </button>


                            <div class="btn-group">
                                <button class="btn btn-outline-secondary" onclick="undo()">
                                    <i class="bi bi-arrow-counterclockwise"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="redo()">
                                    <i class="bi bi-arrow-clockwise"></i>
                                </button>
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-outline-secondary" onclick="clearFormattingToParagraph()">
                                    <i class="bi bi-eraser"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="bold()">
                                    <i class="bi bi-type-bold"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="italic()">
                                    <i class="bi bi-type-italic"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="underline()">
                                    <i class="bi bi-type-underline"></i>
                                </button>
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-outline-secondary" onclick="alignText('left')">
                                    <i class="bi bi-text-left"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="alignText('center')">
                                    <i class="bi bi-text-center"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="alignText('right')">
                                    <i class="bi bi-text-right"></i>
                                </button>
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-outline-secondary" onclick="toggleList('ul')">
                                    <i class="bi bi-list-ul"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="toggleList('ol')">
                                    <i class="bi bi-list-ol"></i>
                                </button>
                            </div>

                            <div class="btn-group">
                                <button class="btn btn-outline-secondary" onclick="insertImageBase64()">
                                    <i class="bi bi-image"></i>
                                </button>

                                <button class="btn btn-outline-secondary" onclick="insertTable()">
                                    <i class="bi bi-table"></i>
                                </button>

                                <button class="btn btn-outline-primary" onclick="openButtonModal()">
                                    <i class="bi bi-node-plus"></i>
                                </button>

                            </div>

                            <button class="btn btn-dark show-code">&lt;/&gt;</button>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!-- EDITOR -->
        <div class="row">
            <div class="col">

                <div class="card shadow">

                    <div class="card-body">

                        <div id="content" contenteditable="true" class="form-control" style="min-height:600px;">
                        </div>

                    </div>
                </div>

            </div>
        </div>
        <!-- Modal Crear Botón -->
        <div class="modal fade" id="buttonModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title">Crear botón de plantilla</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body">

                        <!-- Nombre -->
                        <div class="mb-3">
                            <label class="form-label">Nombre del botón</label>
                            <input type="text" id="btnLabel" class="form-control">
                        </div>

                        <!-- Color -->
                        <div class="mb-3">
                            <label class="form-label">Color</label>
                            <div class="d-flex gap-2">

                                <input type="radio" class="btn-check" name="btnColor" id="colorPrimary"
                                    value="btn-primary" checked>
                                <label class="btn btn-outline-primary" for="colorPrimary">Azul</label>

                                <input type="radio" class="btn-check" name="btnColor" id="colorSuccess"
                                    value="btn-success">
                                <label class="btn btn-outline-success" for="colorSuccess">Verde</label>

                                <input type="radio" class="btn-check" name="btnColor" id="colorDanger"
                                    value="btn-danger">
                                <label class="btn btn-outline-danger" for="colorDanger">Rojo</label>

                            </div>
                        </div>

                        <!-- Acción -->
                        <div class="mb-3">
                            <label class="form-label">Acción</label>
                            <select id="btnAction" class="form-select">
                                <option value="attach_image">Adjuntar imagen</option>
                                <option value="open_form">Abrir formulario</option>
                                <option value="insert_signature">Insertar firma</option>
                                <option value="custom_action">Acción personalizada</option>
                            </select>
                        </div>

                    </div>

                    <div class="modal-footer">
                        <button class="btn btn-secondary" data-bs-dismiss="modal">
                            Cancelar
                        </button>
                        <button class="btn btn-primary" onclick="insertButton()">
                            Crear botón
                        </button>

                    </div>

                </div>
            </div>
        </div>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
        <script src="script.js"></script>

</body>